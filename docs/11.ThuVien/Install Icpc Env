# install_icpc_env.py
# ğŸ“¦ Tá»± Ä‘á»™ng hoÃ¡ táº¡o mÃ´i trÆ°á»ng ICPC vÃ  cÃ i thÆ° viá»‡n cáº§n thiáº¿t
# Sá»­ dá»¥ng cho macOS / Linux terminal (khuyÃªn dÃ¹ng Python 3.8+)

import os
import subprocess

print("\nğŸš€ Báº¯t Ä‘áº§u cÃ i Ä‘áº·t mÃ´i trÆ°á»ng ICPC...")

# 1. Táº¡o mÃ´i trÆ°á»ng áº£o náº¿u chÆ°a cÃ³
if not os.path.exists("icpc-env"):
    print("ğŸ§± Äang táº¡o virtual environment 'icpc-env'...")
    subprocess.run(["python3", "-m", "venv", "icpc-env"])
else:
    print("âœ… ÄÃ£ tá»“n táº¡i 'icpc-env', bá» qua bÆ°á»›c táº¡o.")

# 2. Gá»£i Ã½ ngÆ°á»i dÃ¹ng kÃ­ch hoáº¡t thá»§ cÃ´ng (do script khÃ´ng thá»ƒ tá»± source mÃ´i trÆ°á»ng cho shell cha)
print("\nğŸ“Œ Vui lÃ²ng cháº¡y lá»‡nh sau Ä‘á»ƒ kÃ­ch hoáº¡t mÃ´i trÆ°á»ng trÆ°á»›c khi tiáº¿p tá»¥c:")
print("source icpc-env/bin/activate")
print("\nSau Ä‘Ã³ hÃ£y cháº¡y lá»‡nh bÃªn dÆ°á»›i Ä‘á»ƒ cÃ i thÆ° viá»‡n:")
print("pip install opencv-python pillow numpy torch torchvision\n")

# 3. Gá»£i Ã½ kiá»ƒm tra sau khi cÃ i xong
with open("test_import.py", "w") as f:
    f.write('''import cv2
import numpy as np
from PIL import Image
import torch
import torchvision

print("âœ… MÃ´i trÆ°á»ng ICPC Ä‘Ã£ sáºµn sÃ ng!")
''')

print("ğŸ§ª ÄÃ£ táº¡o file kiá»ƒm tra: test_import.py")
print("â¡ï¸ Sau khi cÃ i xong thÆ° viá»‡n, cháº¡y: python test_import.py\n")
print("ğŸ¯ MÃ´i trÆ°á»ng ICPC Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p sáºµn sÃ ng Ä‘á»ƒ thi offline.")
